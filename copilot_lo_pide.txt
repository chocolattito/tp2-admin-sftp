try:
    # Connect to the SFTP server
    ssh_client.connect(HOSTNAME, port=PORT, username=USERNAME, password=PASSWORD)
    print("Connected to SFTP server")

    # Create an SFTP session
    sftp_client = ssh_client.open_sftp()

    # List files in the remote directory
    remote_directory = '/path/to/remote/directory'
    files = sftp_client.listdir(remote_directory)
    print("Files in remote directory:", files)

    # Upload a file
    local_file = 'local_file.txt'
    remote_file = f'{remote_directory}/remote_file.txt'
    sftp_client.put(local_file, remote_file)
    print(f"Uploaded {local_file} to {remote_file}")

    # Download a file
    sftp_client.get(remote_file, 'downloaded_file.txt')
    print(f"Downloaded {remote_file} to downloaded_file.txt")
    # Close the SFTP session
    sftp_client.close()
    # Close the SSH connection
    ssh_client.close()
except Exception as e:
    print(f"An error occurred: {e}")